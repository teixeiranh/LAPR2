<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1946px" preserveAspectRatio="none" style="width:3472px;height:1946px;background:#FFFFFF;" version="1.1" viewBox="0 0 3472 1946" width="3472px" zoomAndPan="magnify"><defs/><g><rect height="41.4453" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="485" x="1492.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="25" font-weight="bold" lengthAdjust="spacing" textLength="475" x="1497.5" y="40.9521">US17_SD_RegisterLegacyDataDTO_List</text><rect fill="#FFFFFF" height="1733.7656" style="stroke:#181818;stroke-width:1.0;" width="10" x="496" y="140.0156"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="501" y="996.5078"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="501" y="1276.2656"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="501" y="1470.3203"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="170.3672"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="230.7188"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="291.0703"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="351.4219"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="411.7734"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="472.125"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1437" y="1763.0781"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1614" y="1656.375"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1789" y="721.75"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1945" y="636.0469"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2091.5" y="782.1016"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2091.5" y="867.8047"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2213.5" y="928.1563"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2375" y="1061.8594"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2375" y="1147.5625"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2375" y="1207.9141"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2549.5" y="1341.6172"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2549.5" y="1401.9688"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2727.5" y="1535.6719"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2727.5" y="1596.0234"/><rect height="1027.3281" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2484.5" x="373.5" y="681.0469"/><rect height="874.2734" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2464.5" x="383.5" y="827.1016"/><rect height="587.5156" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2444.5" x="393.5" y="1106.8594"/><rect height="122.0547" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1122.5" x="393.5" y="1722.375"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="500.5" x2="500.5" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1329" x2="1329" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1442" x2="1442" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1619" x2="1619" y1="550.2344" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1794" x2="1794" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1950" x2="1950" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2096" x2="2096" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2218" x2="2218" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2380" x2="2380" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2554" x2="2554" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2732" x2="2732" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2889" x2="2889" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="3032" x2="3032" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="3159" x2="3159" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="3255" x2="3255" y1="107.6641" y2="1891.7813"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="3391" x2="3391" y1="107.6641" y2="1891.7813"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="403.5" y="75.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="410.5" y="96.5879">:ImportLegacyDataController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="403.5" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="181" x="410.5" y="1912.3145">:ImportLegacyDataController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1290" y="75.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1297" y="96.5879">:Company</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="1290" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="1297" y="1912.3145">:Company</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="1378" y="75.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1385" y="96.5879">:LegacyDataStore</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="1378" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="1385" y="1912.3145">:LegacyDataStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="1516" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="1523" y="1912.3145">registeredLegacyDataDTOList</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="1545" y="1929.9238">:List&lt;LegacyDataDTO&gt;</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124" x="1732" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1743.5" y="78.9785">legacyDataDTO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="1739" y="96.5879">:LegacyDataDTO</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124" x="1732" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1743.5" y="1912.3145">legacyDataDTO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="1739" y="1929.9238">:LegacyDataDTO</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="1866" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="1876" y="78.9785">vaccinationCenterStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="1873" y="96.5879">:VaccinationCenterStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="1866" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="1876" y="1912.3145">vaccinationCenterStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="1873" y="1929.9238">:VaccinationCenterStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="2044" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="2054" y="78.9785">snsUserStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="2051" y="96.5879">:SnsUserStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="2044" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="2054" y="1912.3145">snsUserStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="2051" y="1929.9238">:SnsUserStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="2159" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="2169" y="78.9785">snsUserMapper</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="2166" y="96.5879">:SnsUserMapper</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="119" x="2159" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="2169" y="1912.3145">snsUserMapper</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="2166" y="1929.9238">:SnsUserMapper</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="2288" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="2298" y="78.9785">vaccinationScheduleStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="2295" y="96.5879">:VaccinationScheduleStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="2288" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164" x="2298" y="1912.3145">vaccinationScheduleStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="2295" y="1929.9238">:VaccinationScheduleStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="2482" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="2492" y="78.9785">snsUserArrivalStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="2489" y="96.5879">:SnsUserArrivalStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="2482" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="2492" y="1912.3145">snsUserArrivalStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="2489" y="1929.9238">:SnsUserArrivalStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191" x="2637" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="2647" y="78.9785">vaccineAdministrationStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="2644" y="96.5879">:VaccineAdministrationStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="191" x="2637" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="2647" y="1912.3145">vaccineAdministrationStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177" x="2644" y="1929.9238">:VaccineAdministrationStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="2838" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="2848" y="78.9785">vaccineStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="2845" y="96.5879">:VaccineStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="2838" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="2848" y="1912.3145">vaccineStore</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="2845" y="1929.9238">:VaccineStore</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="2950" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="2960" y="78.9785">vaccinationCenterDTO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="2957" y="96.5879">:VaccinationCenterDTO</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="2950" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="2960" y="1912.3145">vaccinationCenterDTO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="2957" y="1929.9238">:VaccinationCenterDTO</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="3124" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="3134" y="78.9785">snsUser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="3131" y="96.5879">:SnsUser</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71" x="3124" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="3134" y="1912.3145">snsUser</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="3131" y="1929.9238">:SnsUser</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="3205" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="3215" y="78.9785">snsUserDTO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="3212" y="96.5879">:SnsUserDTO</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="3205" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="3215" y="1912.3145">snsUserDTO</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="3212" y="1929.9238">:SnsUserDTO</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="3316" y="57.4453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="3326" y="78.9785">vaccinationSchedule</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="3323" y="96.5879">:VaccinationSchedule</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="3316" y="1890.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="3326" y="1912.3145">vaccinationSchedule</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="3323" y="1929.9238">:VaccinationSchedule</text><rect fill="#FFFFFF" height="1733.7656" style="stroke:#181818;stroke-width:1.0;" width="10" x="496" y="140.0156"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="501" y="996.5078"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="501" y="1276.2656"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="501" y="1470.3203"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="170.3672"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="230.7188"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="291.0703"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="351.4219"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="411.7734"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1324" y="472.125"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1437" y="1763.0781"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1614" y="1656.375"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1789" y="721.75"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1945" y="636.0469"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2091.5" y="782.1016"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2091.5" y="867.8047"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2213.5" y="928.1563"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2375" y="1061.8594"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2375" y="1147.5625"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2375" y="1207.9141"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2549.5" y="1341.6172"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2549.5" y="1401.9688"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2727.5" y="1535.6719"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="2727.5" y="1596.0234"/><ellipse cx="7.5" cy="139.2656" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="484,136.0156,494,140.0156,484,144.0156,488,140.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="12" x2="490" y1="140.0156" y2="140.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="15" y="135.1592">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="458" x="26" y="135.1592">registerLegacyDataFromExternalSource(importedLegacyDataDTOList, vcEmail)</text><polygon fill="#181818" points="1312,166.3672,1322,170.3672,1312,174.3672,1316,170.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1318" y1="170.3672" y2="170.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="513" y="165.5107">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="524" y="165.5107">vaccinationCenterStore = getVaccinationCenterStore()</text><polygon fill="#181818" points="1312,226.7188,1322,230.7188,1312,234.7188,1316,230.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1318" y1="230.7188" y2="230.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="513" y="225.8623">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="524" y="225.8623">snsUserStore = getSnsUserStore()</text><polygon fill="#181818" points="1312,287.0703,1322,291.0703,1312,295.0703,1316,291.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1318" y1="291.0703" y2="291.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="513" y="286.2139">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="344" x="524" y="286.2139">vaccinationScheduleStore = getVaccinationScheduleStore()</text><polygon fill="#181818" points="1312,347.4219,1322,351.4219,1312,355.4219,1316,351.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1318" y1="351.4219" y2="351.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="513" y="346.5654">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="524" y="346.5654">snsUserArrivalStore = getSnsUserArrivalStore()</text><polygon fill="#181818" points="1312,407.7734,1322,411.7734,1312,415.7734,1316,411.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1318" y1="411.7734" y2="411.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="513" y="406.917">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="360" x="524" y="406.917">vaccineAdministrationStore = getVaccineAdministrationStore()</text><polygon fill="#181818" points="1312,468.125,1322,472.125,1312,476.125,1316,472.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1318" y1="472.125" y2="472.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="513" y="467.2686">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="524" y="467.2686">vaccineStore = getVaccineStore()</text><polygon fill="#181818" points="1504,528.4766,1514,532.4766,1504,536.4766,1508,532.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="506" x2="1510" y1="532.4766" y2="532.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="513" y="527.6201">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="524" y="527.6201">create()</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="1516" y="510.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="1523" y="531.6582">registeredLegacyDataDTOList</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="1545" y="549.2676">:List&lt;LegacyDataDTO&gt;</text><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="548" y1="592.6953" y2="592.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="548" x2="548" y1="592.6953" y2="605.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="507" x2="548" y1="605.6953" y2="605.6953"/><polygon fill="#181818" points="517,601.6953,507,605.6953,517,609.6953,513,605.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="513" y="587.8389">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="524" y="587.8389">registeredWithSuccess = false</text><polygon fill="#181818" points="1933,632.0469,1943,636.0469,1933,640.0469,1937,636.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1939" y1="636.0469" y2="636.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="631.1904">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="396" x="531" y="631.1904">vaccinationCenterDTO = getVaccinationCenterDTOByEmail(vcEmail)</text><path d="M373.5,681.0469 L446.5,681.0469 L446.5,689.3984 L436.5,699.3984 L373.5,699.3984 L373.5,681.0469 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1027.3281" style="stroke:#000000;stroke-width:1.5;" width="2484.5" x="373.5" y="681.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="388.5" y="695.542">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="345" x="461.5" y="694.4658">[for each legacyDataDTO object in importedLegacyDataDTOList]</text><polygon fill="#181818" points="1777,717.75,1787,721.75,1777,725.75,1781,721.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1783" y1="721.75" y2="721.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="716.8936">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="531" y="716.8936">snsUserNumber = getSnsUserNumber()</text><polygon fill="#181818" points="2079.5,778.1016,2089.5,782.1016,2079.5,786.1016,2083.5,782.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2085.5" y1="782.1016" y2="782.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="777.2451">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="531" y="777.2451">userExists = existsSnsUser(snsUserNumber)</text><path d="M383.5,827.1016 L448.5,827.1016 L448.5,835.4531 L438.5,845.4531 L383.5,845.4531 L383.5,827.1016 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="874.2734" style="stroke:#000000;stroke-width:1.5;" width="2464.5" x="383.5" y="827.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="398.5" y="841.5967">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67" x="463.5" y="840.5205">[userExists]</text><polygon fill="#181818" points="2079.5,863.8047,2089.5,867.8047,2079.5,871.8047,2083.5,867.8047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2085.5" y1="867.8047" y2="867.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="862.9482">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="531" y="862.9482">snsUser = getSnsUserBySnsNumber(snsUserNumber)</text><polygon fill="#181818" points="2201.5,924.1563,2211.5,928.1563,2201.5,932.1563,2205.5,928.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2207.5" y1="928.1563" y2="928.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="923.2998">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="531" y="923.2998">snsUserDTO = toDTO(snsUser)</text><line style="stroke:#181818;stroke-width:1.0;" x1="511" x2="553" y1="988.5078" y2="988.5078"/><line style="stroke:#181818;stroke-width:1.0;" x1="553" x2="553" y1="988.5078" y2="1001.5078"/><line style="stroke:#181818;stroke-width:1.0;" x1="512" x2="553" y1="1001.5078" y2="1001.5078"/><polygon fill="#181818" points="522,997.5078,512,1001.5078,522,1005.5078,518,1001.5078" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="518" y="983.6514">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="786" x="536" y="983.6514">vaccinationScheduleDTO = createVaccinationScheduleDTOFromLegacyDataDTO(legacyDataDTO, vaccinationCenterDTO, snsUserDTO)</text><polygon fill="#181818" points="2363,1057.8594,2373,1061.8594,2363,1065.8594,2367,1061.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2369" y1="1061.8594" y2="1061.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1057.0029">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="414" x="531" y="1057.0029">scheduleExists = existsVaccinationSchedule(vaccinationScheduleDTO)</text><path d="M393.5,1106.8594 L458.5,1106.8594 L458.5,1115.2109 L448.5,1125.2109 L393.5,1125.2109 L393.5,1106.8594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="587.5156" style="stroke:#000000;stroke-width:1.5;" width="2444.5" x="393.5" y="1106.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="408.5" y="1121.3545">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137" x="473.5" y="1120.2783">[scheduleExists == false]</text><polygon fill="#181818" points="2363,1143.5625,2373,1147.5625,2363,1151.5625,2367,1147.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2369" y1="1147.5625" y2="1147.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1142.7061">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="444" x="531" y="1142.7061">vaccinationSchedule = createVaccinationSchedule(vaccinationScheduleDTO)</text><polygon fill="#181818" points="2363,1203.9141,2373,1207.9141,2363,1211.9141,2367,1207.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2369" y1="1207.9141" y2="1207.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1203.0576">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="531" y="1203.0576">addVaccinationSchedule(vaccinationSchedule)</text><line style="stroke:#181818;stroke-width:1.0;" x1="511" x2="553" y1="1268.2656" y2="1268.2656"/><line style="stroke:#181818;stroke-width:1.0;" x1="553" x2="553" y1="1268.2656" y2="1281.2656"/><line style="stroke:#181818;stroke-width:1.0;" x1="512" x2="553" y1="1281.2656" y2="1281.2656"/><polygon fill="#181818" points="522,1277.2656,512,1281.2656,522,1285.2656,518,1281.2656" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="518" y="1263.4092">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="598" x="536" y="1263.4092">arrivalDTO = createSnsUserArrivalDTOFromLegacyDataDTO(legacyDataDTO, vaccinationScheduleDTO)</text><polygon fill="#181818" points="2537.5,1337.6172,2547.5,1341.6172,2537.5,1345.6172,2541.5,1341.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2543.5" y1="1341.6172" y2="1341.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1336.7607">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287" x="531" y="1336.7607">snsUserArrival = createSnsUserArrival(arrivalDTO)</text><polygon fill="#181818" points="2537.5,1397.9688,2547.5,1401.9688,2537.5,1405.9688,2541.5,1401.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2543.5" y1="1401.9688" y2="1401.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1397.1123">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="531" y="1397.1123">addSnsUserArrival(snsUserArrival)</text><line style="stroke:#181818;stroke-width:1.0;" x1="511" x2="553" y1="1462.3203" y2="1462.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="553" x2="553" y1="1462.3203" y2="1475.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="512" x2="553" y1="1475.3203" y2="1475.3203"/><polygon fill="#181818" points="522,1471.3203,512,1475.3203,522,1479.3203,518,1475.3203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="518" y="1457.4639">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="733" x="536" y="1457.4639">vaccineAdministrationDTO = createVaccineAdministrationDTOFromLegacyDataDTO(legacyDataDTO, snsUserDTO, arrivalDTO)</text><polygon fill="#181818" points="2715.5,1531.6719,2725.5,1535.6719,2715.5,1539.6719,2719.5,1535.6719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2721.5" y1="1535.6719" y2="1535.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1530.8154">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326" x="531" y="1530.8154">createVaccineAdministration(vaccineAdministrationDTO)</text><polygon fill="#181818" points="2715.5,1592.0234,2725.5,1596.0234,2715.5,1600.0234,2719.5,1596.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="2721.5" y1="1596.0234" y2="1596.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1591.167">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="531" y="1591.167">addVaccineAdministration(vaccineAdministration)</text><polygon fill="#181818" points="1602,1652.375,1612,1656.375,1602,1660.375,1606,1656.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1608" y1="1656.375" y2="1656.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1651.5186">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="531" y="1651.5186">add(legacyDataDTO)</text><path d="M393.5,1722.375 L458.5,1722.375 L458.5,1730.7266 L448.5,1740.7266 L393.5,1740.7266 L393.5,1722.375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="122.0547" style="stroke:#000000;stroke-width:1.5;" width="1122.5" x="393.5" y="1722.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="408.5" y="1736.8701">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="230" x="473.5" y="1735.7939">[!registeredLegacyDataDTOList.isEmpty()]</text><polygon fill="#181818" points="1425,1759.0781,1435,1763.0781,1425,1767.0781,1429,1763.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="1431" y1="1763.0781" y2="1763.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1758.2217">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="302" x="531" y="1758.2217">setRegisteredLegacyDataDTOList(registeredDtoList)</text><line style="stroke:#181818;stroke-width:1.0;" x1="506" x2="548" y1="1823.4297" y2="1823.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="548" x2="548" y1="1823.4297" y2="1836.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="507" x2="548" y1="1836.4297" y2="1836.4297"/><polygon fill="#181818" points="517,1832.4297,507,1836.4297,517,1840.4297,513,1836.4297" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="513" y="1818.5732">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="531" y="1818.5732">registeredWithSuccess = true</text><polygon fill="#181818" points="11,1869.7813,1,1873.7813,11,1877.7813,7,1873.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="500" y1="1873.7813" y2="1873.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="1868.9248">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="35" y="1868.9248">registeredWithSuccess</text><!--MD5=[6b360bdffd33b5b514faa483548c1716]
@startuml
autonumber
autoactivate on
scale 1
skinparam titleFontSize 25

title US17_SD_RegisterLegacyDataDTO_List

participant ":ImportLegacyDataController" as controller
participant ":Company" as company
participant ":LegacyDataStore" as store
participant "registeredLegacyDataDTOList\n:List<LegacyDataDTO>" as registeredDtoList
participant "legacyDataDTO\n:LegacyDataDTO" as legacyDataDTO
participant "vaccinationCenterStore\n:VaccinationCenterStore" as vcStore
participant "snsUserStore\n:SnsUserStore" as snsUserStore
participant "snsUserMapper\n:SnsUserMapper" as snsUserMapper
participant "vaccinationScheduleStore\n:VaccinationScheduleStore" as scheduleStore
participant "snsUserArrivalStore\n:SnsUserArrivalStore" as arrivalStore
participant "vaccineAdministrationStore\n:VaccineAdministrationStore" as administrationStore
participant "vaccineStore\n:VaccineStore" as vaccineStore
participant "vaccinationCenterDTO\n:VaccinationCenterDTO" as vcDTO
participant "snsUser\n:SnsUser" as snsUser
participant "snsUserDTO\n:SnsUserDTO" as snsUserDTO
participant "vaccinationSchedule\n:VaccinationSchedule"

[o->controller : registerLegacyDataFromExternalSource(importedLegacyDataDTOList, vcEmail)

controller -> company : vaccinationCenterStore = getVaccinationCenterStore()
deactivate company
controller -> company : snsUserStore = getSnsUserStore()
deactivate company
controller -> company : vaccinationScheduleStore = getVaccinationScheduleStore()
deactivate company
controller -> company : snsUserArrivalStore = getSnsUserArrivalStore()
deactivate company
controller -> company : vaccineAdministrationStore = getVaccineAdministrationStore()
deactivate company
controller -> company : vaccineStore = getVaccineStore()
deactivate company

controller - -> registeredDtoList** : create()

autoactivate off
controller -> controller : registeredWithSuccess = false
autoactivate on

controller -> vcStore : vaccinationCenterDTO = getVaccinationCenterDTOByEmail(vcEmail)
deactivate vcStore

loop for each legacyDataDTO object in importedLegacyDataDTOList

controller -> legacyDataDTO : snsUserNumber = getSnsUserNumber()
deactivate legacyDataDTO

controller -> snsUserStore : userExists = existsSnsUser(snsUserNumber)
deactivate snsUserStore

opt userExists

controller -> snsUserStore : snsUser = getSnsUserBySnsNumber(snsUserNumber)
deactivate snsUserStore

controller -> snsUserMapper : snsUserDTO = toDTO(snsUser)
deactivate snsUserMapper

controller -> controller : vaccinationScheduleDTO = createVaccinationScheduleDTOFromLegacyDataDTO(legacyDataDTO, vaccinationCenterDTO, snsUserDTO)
deactivate controller

controller -> scheduleStore : scheduleExists = existsVaccinationSchedule(vaccinationScheduleDTO)
deactivate scheduleStore

opt scheduleExists == false

controller -> scheduleStore : vaccinationSchedule = createVaccinationSchedule(vaccinationScheduleDTO)
deactivate scheduleStore

controller -> scheduleStore : addVaccinationSchedule(vaccinationSchedule)
deactivate scheduleStore


controller -> controller : arrivalDTO = createSnsUserArrivalDTOFromLegacyDataDTO(legacyDataDTO, vaccinationScheduleDTO)
deactivate controller

controller -> arrivalStore : snsUserArrival = createSnsUserArrival(arrivalDTO)
deactivate arrivalStore
controller -> arrivalStore : addSnsUserArrival(snsUserArrival)
deactivate arrivalStore

controller -> controller : vaccineAdministrationDTO = createVaccineAdministrationDTOFromLegacyDataDTO(legacyDataDTO, snsUserDTO, arrivalDTO)
deactivate controller

controller -> administrationStore : createVaccineAdministration(vaccineAdministrationDTO)
deactivate administrationStore

controller -> administrationStore : addVaccineAdministration(vaccineAdministration)
deactivate administrationStore

controller -> registeredDtoList : add(legacyDataDTO)
deactivate registeredDtoList

end

end

end

opt !registeredLegacyDataDTOList.isEmpty()
controller -> store : setRegisteredLegacyDataDTOList(registeredDtoList)
deactivate store

autoactivate off
controller -> controller : registeredWithSuccess = true
autoactivate on
end

[<- - controller : registeredWithSuccess

@enduml

PlantUML version 1.2022.4(Sat Apr 09 14:29:17 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>